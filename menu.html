<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="robots" content="noindex, nofollow">
  <title>ç²‰ã‚‚ã‚“å±‹ å…« ä¸‹èµ¤å¡šåº—</title>
  
  <script>
    // ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå‡¦ç†
    (function() {
      const urlParams = new URLSearchParams(window.location.search);
      const tableNumber = urlParams.get('table');
      const orderId = urlParams.get('orderId');
      const fromIndex = urlParams.get('fromIndex');
      
      console.log('=== ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒã‚§ãƒƒã‚¯ ===');
      console.log('tableNumber:', tableNumber);
      console.log('orderId:', orderId);
      console.log('fromIndex:', fromIndex);
      
      if (fromIndex) {
        const newUrl = new URL(window.location);
        newUrl.searchParams.delete('fromIndex');
        window.history.replaceState({}, '', newUrl);
        console.log('â†’ fromIndexãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
      }
      
      if (tableNumber && !orderId && !fromIndex) {
        console.log('â†’ index.html?table=' + tableNumber + ' ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ');
        window.location.href = 'index.html?table=' + tableNumber;
      } else {
        console.log('â†’ ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ãªã„(ã“ã®ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤º)');
      }
    })();
  </script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      min-height: 100vh;
      padding: 0;
      margin: 0;
      max-width: 100vw;
      overflow-x: hidden;
    }
    
    .header {
      background: #FFFF80;
      color: #000;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 15px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .header h1 {
      font-size: 28px;
      margin-bottom: 0;
      font-weight: bold;
      color: #000;
    }
    
    .container {
      max-width: 100%;
      margin: 0;
      padding: 10px;
      min-height: calc(100vh - 80px);
    }
    
    @media (min-width: 420px) {
      .container {
        max-width: 420px;
        margin: 0 auto;
        padding: 15px;
      }
    }
    
    .category-filter {
      background: white;
      padding: 15px;
      border-radius: 15px;
      margin-bottom: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .category-filter label {
      display: block;
      font-size: 18px;
      font-weight: bold;
      color: #333;
      margin-bottom: 10px;
    }
    
    select {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border: 3px solid #4CAF50;
      border-radius: 12px;
      background: white;
      color: #333;
      font-weight: 500;
    }
    
    .menu-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-bottom: 100px;
    }
    
    @media (min-width: 420px) {
      .menu-grid {
        gap: 15px;
      }
    }
    
    .menu-item {
      background: white;
      border-radius: 15px;
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: row;
      align-items: center;
      text-align: left;
      gap: 15px;
      position: relative;
    }
    
    .menu-item.sold-out {
      opacity: 0.5;
      cursor: not-allowed;
      background: #f5f5f5;
    }
    
    .menu-item.sold-out::after {
      content: 'å“åˆ‡ã‚Œ';
      position: absolute;
      top: 10px;
      right: 10px;
      background: #f44336;
      color: white;
      padding: 5px 12px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: bold;
      box-shadow: 0 2px 8px rgba(244, 67, 54, 0.4);
    }
    
    .menu-item:active {
      transform: scale(0.95);
    }
    
    .menu-item:hover {
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
      transform: translateY(-3px);
    }
    
    .menu-item-image {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 10px;
      flex-shrink: 0;
    }
    
    .menu-item-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    
    .menu-item-name {
      font-size: 16px;
      font-weight: bold;
      color: #333;
      margin-bottom: 8px;
      line-height: 1.3;
    }
    
    @media (min-width: 420px) {
      .menu-item-name {
        font-size: 18px;
      }
    }
    
    .menu-item-price {
      font-size: 20px;
      color: #4CAF50;
      font-weight: bold;
    }
    
    .menu-item-note {
      font-size: 12px;
      color: #999;
      margin-top: 5px;
    }
    
    button {
      width: 100%;
      padding: 18px;
      font-size: 20px;
      font-weight: bold;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      margin: 8px 0;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    
    button:active {
      transform: scale(0.98);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
      color: white;
    }
    
    .btn-primary:hover {
      background: linear-gradient(135deg, #45a049 0%, #3d8b40 100%);
    }
    
    .btn-secondary {
      background: #e0e0e0;
      color: #333;
    }
    
    .topping-list {
      display: grid;
      gap: 12px;
      margin: 20px 0;
    }
    
    .topping-item {
      padding: 15px;
      border: 3px solid #e0e0e0;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: white;
      font-size: 16px;
    }
    
    .topping-item.selected {
      background: #e8f5e9;
      border-color: #4CAF50;
      font-weight: bold;
    }
    
    .topping-item:active {
      transform: scale(0.98);
    }
    
    .quantity-control {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin: 25px 0;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    
    .quantity-btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #4CAF50;
      color: white;
      font-size: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
    }
    
    .quantity-btn:active {
      transform: scale(0.9);
    }
    
    .quantity-display {
      font-size: 40px;
      font-weight: bold;
      min-width: 80px;
      text-align: center;
      color: #333;
    }
    
    .price-display {
      background: white;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      margin: 20px 0;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    
    .price-label {
      font-size: 18px;
      color: #666;
      margin-bottom: 8px;
    }
    
    .price-amount {
      font-size: 36px;
      font-weight: bold;
      color: #4CAF50;
    }
    
    .cart-item {
      background: white;
      border-radius: 15px;
      padding: 18px;
      margin-bottom: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      position: relative;
    }
    
    .cart-item-delete-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #f44336;
      color: white;
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(244, 67, 54, 0.4);
    }
    
    .cart-item-delete-btn:active {
      transform: scale(0.9);
    }
    
    .cart-item.sold-out {
      background: #ffebee;
      border: 2px solid #f44336;
    }
    
    .cart-item.sold-out::after {
      content: 'âš ï¸ å“åˆ‡ã‚Œ';
      position: absolute;
      top: 10px;
      right: 10px;
      background: #f44336;
      color: white;
      padding: 5px 10px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: bold;
    }
    
    .cart-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .cart-item-name {
      font-weight: bold;
      font-size: 18px;
      color: #333;
    }
    
    .cart-item-price {
      font-size: 20px;
      color: #4CAF50;
      font-weight: bold;
    }
    
    .cart-item-details {
      font-size: 16px;
      color: #666;
      margin-top: 5px;
    }
    
    .order-complete {
      text-align: center;
      padding: 30px 20px;
    }
    
    .order-number-display {
      background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
      color: white;
      font-size: 80px;
      font-weight: bold;
      padding: 40px;
      border-radius: 20px;
      margin: 30px 0;
      box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
    }
    
    .waiting-info {
      font-size: 22px;
      color: #000;
      margin: 25px 0;
      font-weight: bold;
    }
    
    .waiting-info span {
      font-size: 66px;
      display: inline-block;
      color: #FF0000;
    }
    
    .warning-box {
      background: #fff3cd;
      border: 3px solid #ffc107;
      color: #856404;
      padding: 20px;
      border-radius: 15px;
      margin: 25px 0;
      font-size: 18px;
      font-weight: bold;
      line-height: 1.6;
    }
    
    .hidden { display: none; }
    
    .fixed-cart-btn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      right: 20px;
      z-index: 1000;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }
    
    .page-title {
      font-size: 24px;
      font-weight: bold;
      color: #000;
      margin-bottom: 20px;
      text-align: center;
      font-family: 'Hiragino Maru Gothic ProN', 'Rounded Mplus 1c', sans-serif;
    }
    
    .top-waiting-info {
      background: rgba(255, 255, 255, 0.95);
      padding: 15px;
      border-radius: 12px;
      text-align: center;
      margin-bottom: 25px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .top-waiting-label {
      font-size: 16px;
      font-weight: bold;
      color: #666;
      margin-bottom: 5px;
    }
    
    .top-waiting-count {
      font-size: 32px;
      font-weight: bold;
      color: #ff6b6b;
    }
    
    .item-info-card {
      background: white;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <div class="header">
    <img src="./head.jpg" alt="ç²‰ã‚‚ã‚“å±‹ å…« ä¸‹èµ¤å¡šåº—" style="max-width: 100%; height: auto; display: block; margin: 0 auto;" onerror="this.style.display='none'">
  </div>

  <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§ãƒšãƒ¼ã‚¸ -->
  <div id="page-menu">
    <div class="container">
      <div class="top-waiting-info">
        <div class="top-waiting-label">ãŸã ä»Šã®ãŠå¾…ã¡äººæ•°</div>
        <div class="top-waiting-count"><span id="top-waiting">-</span>çµ„</div>
      </div>
      <div class="category-filter">
        <label>ã‚«ãƒ†ã‚´ãƒªã‚’é¸ã‚“ã§ãã ã•ã„</label>
        <select id="category-select">
          <option value="">å…¨ã¦ã®å•†å“</option>
        </select>
      </div>
      <div class="menu-grid" id="menu-list"></div>
    </div>
    <button id="cart-btn" class="btn-primary fixed-cart-btn hidden" onclick="showCart()">ã‚«ãƒ¼ãƒˆã‚’è¦‹ã‚‹</button>
  </div>

  <!-- ãƒˆãƒƒãƒ”ãƒ³ã‚°é¸æŠãƒšãƒ¼ã‚¸ -->
  <div id="page-topping" class="hidden">
    <div class="container">
      <div class="page-title">ãƒˆãƒƒãƒ”ãƒ³ã‚°ã‚’é¸æŠ</div>
      <div class="item-info-card" id="item-info"></div>
      <div class="topping-list" id="topping-list"></div>
      <div class="quantity-control">
        <div class="quantity-btn" onclick="changeQty(-1)">âˆ’</div>
        <div class="quantity-display" id="qty">1</div>
        <div class="quantity-btn" onclick="changeQty(1)">+</div>
      </div>
      <div class="price-display">
        <div class="price-label">å°è¨ˆ</div>
        <div class="price-amount" id="subtotal">Â¥0</div>
      </div>
      <button class="btn-primary" onclick="addToCart()">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>
      <button class="btn-secondary" onclick="backToMenu()">æˆ»ã‚‹</button>
    </div>
  </div>

  <!-- ã‚«ãƒ¼ãƒˆãƒšãƒ¼ã‚¸ -->
  <div id="page-cart" class="hidden">
    <div class="container">
      <div class="page-title">ã‚«ãƒ¼ãƒˆ</div>
      <div id="cart-items"></div>
      <div class="price-display">
        <div class="price-label">åˆè¨ˆé‡‘é¡</div>
        <div class="price-amount" id="cart-total">Â¥0</div>
      </div>
      <button class="btn-primary" onclick="confirmOrder()">æ³¨æ–‡ã‚’ç¢ºå®šã™ã‚‹</button>
      <button class="btn-secondary" onclick="continueShopping()">è²·ã„ç‰©ã‚’ç¶šã‘ã‚‹</button>
    </div>
  </div>

  <!-- æ³¨æ–‡å®Œäº†ãƒšãƒ¼ã‚¸ -->
  <div id="page-complete" class="hidden">
    <div class="container">
      <div class="order-complete">
        <h2 style="color: #000; font-size: 20px; text-shadow: 2px 2px 4px rgba(0,0,0,0.1);">âœ… ã”æ³¨æ–‡ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™</h2>
        <div style="background: white; padding: 15px; border-radius: 10px; margin: 20px 0;">
          <div style="font-size: 18px; color: #666; margin-bottom: 5px;">ã”åˆ©ç”¨ã‚¹ã‚¿ã‚¤ãƒ«</div>
          <div style="font-size: 28px; font-weight: bold; color: #ff6b9d;" id="eat-style">-</div>
        </div>
        
        <div class="waiting-info">ãŠå®¢æ§˜ã¯<span id="waiting">1</span>ç•ªç›®ã«<br>ãŠå¾…ã¡é ‚ã„ã¦ã¾ã™</div>
        
        <div style="color: #000; font-size: 22px; margin: 15px 0;">æ³¨æ–‡ç•ªå·</div>
        <div class="order-number-display" id="order-num">000</div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0;">
          <button class="btn-primary" style="background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%); box-shadow: 0 8px 20px rgba(0,0,0,0.3); padding: 15px; font-size: 18px;" onclick="callStaffFromComplete()">ğŸ“ å‘¼å‡º</button>
          <button class="btn-primary" style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); box-shadow: 0 8px 20px rgba(0,0,0,0.3); padding: 15px; font-size: 18px;" onclick="requestBillFromComplete()">ğŸ’³ ãŠä¼šè¨ˆ</button>
        </div>
        
        <div style="font-size: 20px; font-weight: bold; color: #000; margin: 20px 0;">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</div>
        
        <div id="order-status" class="warning-box" style="background: linear-gradient(135deg, #a8edea 0%, #89d4cf 100%); color: #000; border-color: #89d4cf;">
          â³ ãŸã ä»Šæº–å‚™ã—ã¦ã„ã¾ã™ã€<br>ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„
        </div>
        
        <div class="warning-box" style="background: #e3f2fd; border-color: #2196F3; color: #1565c0;">
          <strong>ğŸ’¡ å¾…ã¡æ™‚é–“ã®éã”ã—æ–¹</strong><br><br>
          åˆ¥ã®ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹å ´åˆã¯ã€<br>
          <strong style="font-size: 18px;">æ™‚ã€…ã“ã®ã‚¿ãƒ–ã«æˆ»ã£ã¦ãã¦<br>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„</strong><br><br>
          å•†å“å®Œæˆæ™‚ã¯ç”»é¢ã®ã‚¿ãƒ–ã‚¿ã‚¤ãƒˆãƒ«ãŒ<br>
          ã€ŒğŸ‰ å•†å“å®Œæˆ!ã€ã¨ç‚¹æ»…ã—ã¾ã™
        </div>
        
        <div class="warning-box" style="background: #fff3cd; border-color: #ffc107; color: #856404;">
          <strong>ğŸ“± é‡è¦ãªãŠé¡˜ã„</strong><br><br>
          æ³¨æ–‡ç•ªå·ã§ç®¡ç†ã—ã¦ã„ã¾ã™ã®ã§ã€<br>
          <strong style="font-size: 20px; color: #d32f2f;">å•†å“ã‚’å—ã‘å–ã‚‹ã¾ã§ã“ã®ç”»é¢ã‚’é–‰ã˜ãªã„ã§ãã ã•ã„</strong><br><br>
          ç”»é¢ã‚’é–‰ã˜ã‚‹ã¨éŸ³å£°æ¡ˆå†…ãŒã§ãã¾ã›ã‚“
        </div>
        
        <div class="warning-box" style="background: #ffebee; border-color: #ef5350; color: #c62828;">
          <strong>âš ï¸ é‡è¦ãªãŠçŸ¥ã‚‰ã›</strong><br><br>
          â€¢ å¸­ã‚’å¤–ã™éš›ã«ã¯å…ˆã«<br>ãŠä¼šè¨ˆã‚’æ¸ˆã¾ã›ã¦ãã ã•ã„<br><br>
          â€¢ ç•ªå·ã‚’ãŠå‘¼ã³ã—ã¦ã‚‚æœªä¼šè¨ˆã®ã¾ã¾å¸­ã‚’å¤–ã•ã‚Œã¾ã™ã¨æ³¨æ–‡ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¨ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
        </div>
        
        <div style="color: black; font-size: 22px; margin: 25px 0; font-weight: bold;">ã”æ³¨æ–‡å†…å®¹</div>
        <div id="order-items"></div>
        <div class="price-display">
          <div class="price-label">åˆè¨ˆé‡‘é¡</div>
          <div class="price-amount" id="order-total">Â¥0</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, getDocs, getDoc, addDoc, onSnapshot, updateDoc, doc, Timestamp, setDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyBoSdfEkez-b3P0BUHtowxCrTw-yEBdHSg",
      authDomain: "takoyaki-order-system-bacd7.firebaseapp.com",
      projectId: "takoyaki-order-system-bacd7",
      storageBucket: "takoyaki-order-system-bacd7.firebasestorage.app",
      messagingSenderId: "104494752890",
      appId: "1:104494752890:web:c0a25d62f42ffca01687c3"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let cart = [];
    let currentItem = null;
    let selectedToppings = [];
    let qty = 1;
    let allMenuItems = [];
    let soldOutIds = new Set();
    let currentOrderId = null;
    let orderStatusUnsubscribe = null;
    let allOrdersUnsubscribe = null;
    let positionUpdateInterval = null;
    let wakeLock = null;
    let titleBlinkInterval = null;
    
    const urlParams = new URLSearchParams(window.location.search);
    const tableNumber = urlParams.get('table') || 'ãƒ†ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆ';

    window.onload = async function() {
      console.log('ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é–‹å§‹');
      
      // æ™‚é–“å¸¯ã«ã‚ˆã‚‹å“åˆ‡ã‚Œãƒã‚§ãƒƒã‚¯
      await checkTimeBasedAvailability();
      
      await loadAllData();
      await updateTopWaitingCount();
      setInterval(updateTopWaitingCount, 10000);
      watchSoldOutItems();
      console.log('åˆæœŸåŒ–å®Œäº†');
    };
    
    // æ™‚é–“å¸¯ã«ã‚ˆã‚‹åˆ©ç”¨å¯å¦ãƒã‚§ãƒƒã‚¯
    async function checkTimeBasedAvailability() {
      // ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰è¨­å®šã‚’ãƒã‚§ãƒƒã‚¯
      try {
        const settingsRef = doc(db, 'settings', 'timeOverride');
        const settingsSnap = await getDoc(settingsRef);
        const overrideEnabled = settingsSnap.exists() ? settingsSnap.data().enabled : false;
        
        if (overrideEnabled) {
          console.log('âš ï¸ å–¶æ¥­æ™‚é–“å¤–ãƒã‚§ãƒƒã‚¯ãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™');
          return; // ãƒã‚§ãƒƒã‚¯ã‚’ã‚¹ã‚­ãƒƒãƒ—
        }
      } catch (e) {
        console.error('ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰è¨­å®šã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e);
      }
      
      const now = new Date();
      const hours = now.getHours();
      const minutes = now.getMinutes();
      const currentTime = hours * 100 + minutes; // ä¾‹: 22:30 = 2230
      
      const hasTableParam = urlParams.has('table');
      
      // ?table=ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆï¼ˆåº—å†…æ³¨æ–‡å…¨ã¦ï¼‰: 22:00ï½11:00ã¯å“åˆ‡ã‚Œ
      if (hasTableParam) {
        if (currentTime >= 2200 || currentTime < 1100) {
          showTimeBasedSoldOut('åº—å†…æ³¨æ–‡ã®å—ä»˜æ™‚é–“ã¯11:00ï½22:00ã§ã™');
          return;
        }
      }
      // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—ã€ã¾ãŸã¯ãƒ†ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆ: 22:30ï½11:00ã¯å“åˆ‡ã‚Œ
      else {
        if (currentTime >= 2230 || currentTime < 1100) {
          showTimeBasedSoldOut('ãƒ†ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆã®å—ä»˜æ™‚é–“ã¯11:00ï½22:30ã§ã™');
          return;
        }
      }
    }
    
    // æ™‚é–“å¤–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
    function showTimeBasedSoldOut(message) {
      const overlay = document.createElement('div');
      overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
      `;
      
      const dialog = document.createElement('div');
      dialog.style.cssText = `
        background: white;
        border-radius: 15px;
        padding: 40px;
        max-width: 80%;
        text-align: center;
        box-shadow: 0 8px 30px rgba(0,0,0,0.3);
      `;
      
      dialog.innerHTML = 
