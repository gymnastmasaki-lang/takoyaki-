<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é£Ÿæç™ºæ³¨ã‚·ã‚¹ãƒ†ãƒ  - ç²‰ã‚‚ã‚“å±‹å…« ä¸‹èµ¤å¡šåº—</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFunctions, httpsCallable } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-functions.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyBoSdfEkez-b3P0BUHtowxCrTw-yEBdHSg",
      authDomain: "takoyaki-order-system-bacd7.firebaseapp.com",
      projectId: "takoyaki-order-system-bacd7",
      storageBucket: "takoyaki-order-system-bacd7.firebasestorage.app",
      messagingSenderId: "104494752890",
      appId: "1:104494752890:web:c0a25d62f42ffca01687c3"
    };
    
    const app = initializeApp(firebaseConfig);
    const functions = getFunctions(app);
    
    window.firebaseFunctions = functions;
    window.httpsCallable = httpsCallable;
    window.firebaseReady = true;
  </script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Yu Gothic', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 10px;
      margin: 0;
    }
    
    .container {
      max-width: 100%;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      padding: 15px;
    }
    
    .header {
      text-align: center;
      margin-bottom: 20px;
      border-bottom: 3px solid #667eea;
      padding-bottom: 15px;
    }
    
    .header h1 {
      color: #333;
      font-size: 20px;
      margin-bottom: 5px;
    }
    
    .header .subtitle {
      color: #666;
      font-size: 13px;
    }
    
    .info-section {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
    }
    
    .info-row {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      flex-direction: column;
      align-items: stretch;
    }
    
    .info-row:last-child {
      margin-bottom: 0;
    }
    
    .info-row label {
      width: 100%;
      font-weight: bold;
      color: #333;
      margin-bottom: 5px;
      font-size: 14px;
    }
    
    .info-row input {
      width: 100%;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
      box-sizing: border-box;
    }
    
    .info-row input:focus {
      outline: none;
      border-color: #667eea;
    }
    
    .order-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
      font-size: 12px;
    }
    
    .order-table thead {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    
    .order-table th {
      padding: 10px 5px;
      text-align: left;
      font-weight: bold;
      font-size: 11px;
    }
    
    .order-table th:nth-child(1) { width: 60px; font-size: 10px; }
    .order-table th:nth-child(2) { width: auto; }
    .order-table th:nth-child(3) { width: 70px; }
    .order-table th:nth-child(4) { width: 70px; }
    
    .order-table tbody tr {
      border-bottom: 1px solid #eee;
    }
    
    .order-table tbody tr:hover {
      background: #f8f9fa;
    }
    
    .order-table td {
      padding: 8px 5px;
      font-size: 12px;
    }
    
    .order-table td:first-child {
      font-size: 10px;
      color: #666;
    }
    
    .order-table select {
      width: 100%;
      padding: 6px 2px;
      border: 2px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      background: white;
      cursor: pointer;
      box-sizing: border-box;
    }
    
    .order-table select:focus {
      outline: none;
      border-color: #667eea;
    }
    
    .order-table select:not([value=""]) {
      background: #e3f2fd;
      border-color: #2196F3;
    }
    
    .action-buttons {
      display: flex;
      gap: 8px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 15px;
    }
    
    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      flex: 1;
      min-width: 0;
    }
    
    .btn:active {
      transform: scale(0.95);
    }
    
    .btn-pdf {
      background: linear-gradient(135deg, #f44336 0%, #e91e63 100%);
      color: white;
    }
    
    .btn-csv {
      background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
      color: white;
    }
    
    .btn-send {
      background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
      color: white;
    }
    
    .btn-link {
      background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
      color: white;
      text-decoration: none;
    }
    
    .note {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 12px;
      border-radius: 4px;
      font-size: 13px;
    }
    
    .note-title {
      font-weight: bold;
      color: #856404;
      margin-bottom: 5px;
    }
    
    .note-content {
      color: #856404;
      font-size: 12px;
      line-height: 1.6;
    }
    
    @media print {
      body {
        background: white;
        padding: 0;
      }
      
      .container {
        box-shadow: none;
        padding: 20px;
      }
      
      .action-buttons, .note {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>é£Ÿæç™ºæ³¨ã‚·ã‚¹ãƒ†ãƒ </h1>
    </div>
    
    <div class="info-section">
      <div class="info-row">
        <label>é¡§å®¢ã‚³ãƒ¼ãƒ‰:</label>
        <input type="text" id="customerCode" value="" placeholder="é¡§å®¢ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
      </div>
      <div class="info-row">
        <label>åº—èˆ—å:</label>
        <input type="text" id="storeName" value="" placeholder="åº—èˆ—åã‚’å…¥åŠ›">
      </div>
      <div class="info-row">
        <label>ç™ºæ³¨æ—¥:</label>
        <input type="date" id="orderDate">
      </div>
    </div>
    
    <table class="order-table" id="orderTable">
      <thead>
        <tr>
          <th>å•†å“ã‚³ãƒ¼ãƒ‰</th>
          <th>å•†å“å</th>
          <th>ã‚±ãƒ¼ã‚¹æ•°</th>
          <th>ãƒãƒ©æ•°</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td></td>
          <td>ãŸã“ç„¼ç²‰</td>
          
          <td><select class="qty-case" data-product="ãŸã“ç„¼ç²‰" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ãŸã“ç„¼ç²‰" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td></td>
          <td>ãŠå¥½ã¿ç²‰</td>
          
          <td><select class="qty-case" data-product="ãŠå¥½ã¿ç²‰" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ãŠå¥½ã¿ç²‰" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>425</td>
          <td>ãƒ€ã‚·</td>
          
          <td><select class="qty-case" data-product="ãƒ€ã‚·" data-code="425" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ãƒ€ã‚·" data-code="425" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td></td>
          <td>ã‚¿ã‚³</td>
          
          <td><select class="qty-case" data-product="ã‚¿ã‚³" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ã‚¿ã‚³" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td></td>
          <td>ã‚¤ã‚«</td>
          
          <td><select class="qty-case" data-product="ã‚¤ã‚«" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ã‚¤ã‚«" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>902</td>
          <td>å¤©ã‹ã™</td>
          
          <td><select class="qty-case" data-product="å¤©ã‹ã™" data-code="902" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="å¤©ã‹ã™" data-code="902" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>215</td>
          <td>ã‚½ãƒ¼ã‚¹</td>
          
          <td><select class="qty-case" data-product="ã‚½ãƒ¼ã‚¹" data-code="215" data-unit="ç®±"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ã‚½ãƒ¼ã‚¹" data-code="215" data-unit="ç®±"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td></td>
          <td>ç‰å­</td>
          
          <td><select class="qty-case" data-product="ç‰å­" data-unit="ç®±"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ç‰å­" data-unit="ç®±"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>283</td>
          <td>ç²‰ã‚‚ã‚“å±‹å…«å”è¾›å­é†¤æ²¹1.8</td>
          
          <td><select class="qty-case" data-product="ç²‰ã‚‚ã‚“å±‹å…«å”è¾›å­é†¤æ²¹1.8" data-code="283" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ç²‰ã‚‚ã‚“å±‹å…«å”è¾›å­é†¤æ²¹1.8" data-code="283" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>383</td>
          <td>ãƒãƒ³é…¢</td>
          
          <td><select class="qty-case" data-product="ãƒãƒ³é…¢" data-code="383" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ãƒãƒ³é…¢" data-code="383" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>320</td>
          <td>ãƒãƒ¨ãƒãƒ¼ã‚º</td>
          
          <td><select class="qty-case" data-product="ãƒãƒ¨ãƒãƒ¼ã‚º" data-code="320" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ãƒãƒ¨ãƒãƒ¼ã‚º" data-code="320" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>362</td>
          <td>å¡©ã‚³ã‚·ãƒ§ã‚¦</td>
          
          <td><select class="qty-case" data-product="å¡©ã‚³ã‚·ãƒ§ã‚¦" data-code="362" data-unit="ç¼¶"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="å¡©ã‚³ã‚·ãƒ§ã‚¦" data-code="362" data-unit="ç¼¶"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>520</td>
          <td>é’ã•500ï½‡</td>
          
          <td><select class="qty-case" data-product="é’ã•500ï½‡" data-code="520" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="é’ã•500ï½‡" data-code="520" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>716</td>
          <td>ç´…ã‚·ãƒ§ã‚¦ã‚¬</td>
          
          <td><select class="qty-case" data-product="ç´…ã‚·ãƒ§ã‚¦ã‚¬" data-code="716" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ç´…ã‚·ãƒ§ã‚¦ã‚¬" data-code="716" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>1488</td>
          <td>ãƒãƒ¼ã‚º</td>
          
          <td><select class="qty-case" data-product="ãƒãƒ¼ã‚º" data-code="1488" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ãƒãƒ¼ã‚º" data-code="1488" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>514</td>
          <td>ãã–ã¿ã®ã‚Š</td>
          
          <td><select class="qty-case" data-product="ãã–ã¿ã®ã‚Š" data-code="514" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ãã–ã¿ã®ã‚Š" data-code="514" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>610</td>
          <td>ãƒ©ãƒ¼ãƒ‰</td>
          
          <td><select class="qty-case" data-product="ãƒ©ãƒ¼ãƒ‰" data-code="610" data-unit="ç¼¶"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ãƒ©ãƒ¼ãƒ‰" data-code="610" data-unit="ç¼¶"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>322</td>
          <td>ã¤ã¶ã¤ã¶æ˜å¤ªå­ãƒãƒ¨ãƒãƒ¼ã‚º</td>
          
          <td><select class="qty-case" data-product="ã¤ã¶ã¤ã¶æ˜å¤ªå­ãƒãƒ¨ãƒãƒ¼ã‚º" data-code="322" data-unit="å€‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ã¤ã¶ã¤ã¶æ˜å¤ªå­ãƒãƒ¨ãƒãƒ¼ã‚º" data-code="322" data-unit="å€‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td></td>
          <td>æœŸé–“é™å®š</td>
          
          <td><select class="qty-case" data-product="æœŸé–“é™å®š" data-unit="å€‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="æœŸé–“é™å®š" data-unit="å€‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td></td>
          <td>èµ¤ã ã¾ã‚Šã‚½ãƒ¼ã‚¹</td>
          
          <td><select class="qty-case" data-product="èµ¤ã ã¾ã‚Šã‚½ãƒ¼ã‚¹" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="èµ¤ã ã¾ã‚Šã‚½ãƒ¼ã‚¹" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td></td>
          <td>æ¢…ãƒ‰ãƒ¬ãƒƒã‚·ãƒ³ã‚°</td>
          
          <td><select class="qty-case" data-product="æ¢…ãƒ‰ãƒ¬ãƒƒã‚·ãƒ³ã‚°" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="æ¢…ãƒ‰ãƒ¬ãƒƒã‚·ãƒ³ã‚°" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>421</td>
          <td>å’Œé¢¨ã ã—1.8L</td>
          
          <td><select class="qty-case" data-product="å’Œé¢¨ã ã—1.8L" data-code="421" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="å’Œé¢¨ã ã—1.8L" data-code="421" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>506</td>
          <td>æ‰‹ã‚‚ã¿ã‚«ãƒ„ã‚ª</td>
          
          <td><select class="qty-case" data-product="æ‰‹ã‚‚ã¿ã‚«ãƒ„ã‚ª" data-code="506" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="æ‰‹ã‚‚ã¿ã‚«ãƒ„ã‚ª" data-code="506" data-unit="ã‚±ãƒ¼ã‚¹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>2366</td>
          <td>ã‚²ã‚½ã®å”æšã’ã€€æ „å’Œ</td>
          
          <td><select class="qty-case" data-product="ã‚²ã‚½ã®å”æšã’ã€€æ „å’Œ" data-code="2366" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ã‚²ã‚½ã®å”æšã’ã€€æ „å’Œ" data-code="2366" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>2906</td>
          <td>æè±†</td>
          
          <td><select class="qty-case" data-product="æè±†" data-code="2906" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="æè±†" data-code="2906" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>2430</td>
          <td>ãƒãƒ†ãƒˆã€€æ „å’Œ</td>
          
          <td><select class="qty-case" data-product="ãƒãƒ†ãƒˆã€€æ „å’Œ" data-code="2430" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ãƒãƒ†ãƒˆã€€æ „å’Œ" data-code="2430" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>2355</td>
          <td>ãªã‚“ã“ã¤500ï½‡ã€€æ „å’Œ</td>
          
          <td><select class="qty-case" data-product="ãªã‚“ã“ã¤500ï½‡ã€€æ „å’Œ" data-code="2355" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ãªã‚“ã“ã¤500ï½‡ã€€æ „å’Œ" data-code="2355" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>208</td>
          <td>ã‚¦ã‚¹ã‚¿ãƒ¼ã‚½ãƒ¼ã‚¹</td>
          
          <td><select class="qty-case" data-product="ã‚¦ã‚¹ã‚¿ãƒ¼ã‚½ãƒ¼ã‚¹" data-code="208" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ã‚¦ã‚¹ã‚¿ãƒ¼ã‚½ãƒ¼ã‚¹" data-code="208" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>246</td>
          <td>å¡©ã ã‚Œ</td>
          
          <td><select class="qty-case" data-product="å¡©ã ã‚Œ" data-code="246" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="å¡©ã ã‚Œ" data-code="246" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>602</td>
          <td>ç™½çµæ²¹</td>
          
          <td><select class="qty-case" data-product="ç™½çµæ²¹" data-code="602" data-unit="ç¼¶"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ç™½çµæ²¹" data-code="602" data-unit="ç¼¶"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>331</td>
          <td>ã‚±ãƒãƒ£ãƒƒãƒ—</td>
          
          <td><select class="qty-case" data-product="ã‚±ãƒãƒ£ãƒƒãƒ—" data-code="331" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ã‚±ãƒãƒ£ãƒƒãƒ—" data-code="331" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>4007</td>
          <td>ã‚¢ãƒ«ãƒšãƒƒãƒˆ</td>
          
          <td><select class="qty-case" data-product="ã‚¢ãƒ«ãƒšãƒƒãƒˆ" data-code="4007" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ã‚¢ãƒ«ãƒšãƒƒãƒˆ" data-code="4007" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>2006</td>
          <td>æ²¹ã‹ã™</td>
          
          <td><select class="qty-case" data-product="æ²¹ã‹ã™" data-code="2006" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="æ²¹ã‹ã™" data-code="2006" data-unit="è¢‹"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
        <tr>
          <td>317</td>
          <td>ã‚¿ãƒ«ã‚¿ãƒ«ã‚½ãƒ¼ã‚¹</td>
          
          <td><select class="qty-case" data-product="ã‚¿ãƒ«ã‚¿ãƒ«ã‚½ãƒ¼ã‚¹" data-code="317" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
          <td><select class="qty-bara" data-product="ã‚¿ãƒ«ã‚¿ãƒ«ã‚½ãƒ¼ã‚¹" data-code="317" data-unit="æœ¬"><option value="">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
        </tr>
      </tbody>
    </table>
    
    <div class="action-buttons" id="actionButtons">
      <button class="btn btn-pdf" onclick="generatePDF()">ğŸ“„ PDFå‡ºåŠ›</button>
      <button class="btn btn-send" onclick="sendOrder()" id="sendBtn">ğŸ“§ ç™ºæ³¨ã™ã‚‹</button>
    </div>
    
    <div class="action-buttons" id="switchButtons" style="display: none;">
      <a href="order_houzai.html" class="btn btn-link">åŒ…æç™ºæ³¨ã¸</a>
    </div>
    
    <div class="note">
      <div class="note-title">ğŸ’¡ ä½¿ã„æ–¹</div>
      <div class="note-content">
        1. é¡§å®¢ã‚³ãƒ¼ãƒ‰ã¨ç™ºæ³¨æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„<br>
        2. å„å•†å“ã®ã‚±ãƒ¼ã‚¹æ•°ãƒ»ãƒãƒ©æ•°ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼ˆæ•°é‡ã‚’é¸æŠã—ãŸå•†å“ã®ã¿ç™ºæ³¨ã•ã‚Œã¾ã™ï¼‰
      </div>
    </div>
  </div>
  
  <script>
    // ä»Šæ—¥ã®æ—¥ä»˜ã‚’è¨­å®š
    document.getElementById('orderDate').valueAsDate = new Date();
    
    // æ•°é‡ãŒé¸æŠã•ã‚ŒãŸã‚‰èƒŒæ™¯è‰²ã‚’å¤‰æ›´
    document.querySelectorAll('select').forEach(select => {
      select.addEventListener('change', function() {
        if (this.value) {
          this.style.background = '#e3f2fd';
          this.style.borderColor = '#2196F3';
        } else {
          this.style.background = 'white';
          this.style.borderColor = '#ddd';
        }
      });
    });
    
    // PDFç”Ÿæˆ
    function generatePDF() {
      const customerCode = document.getElementById('customerCode').value;
      const storeName = document.getElementById('storeName').value;
      const orderDate = document.getElementById('orderDate').value;
      
      if (!customerCode || !storeName) {
        alert('é¡§å®¢ã‚³ãƒ¼ãƒ‰ã¨åº—èˆ—åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }
      
      // æ•°é‡ãŒé¸æŠã•ã‚ŒãŸå•†å“ã‚’åé›†
      const orders = [];
      document.querySelectorAll('.order-table tbody tr').forEach(row => {
        const caseSelect = row.querySelector('.qty-case');
        const baraSelect = row.querySelector('.qty-bara');
        const caseQty = caseSelect.value;
        const baraQty = baraSelect.value;
        
        if (caseQty || baraQty) {
          const code = caseSelect.dataset.code || '';
          const product = caseSelect.dataset.product;
          
          orders.push({
            code: code,
            product: product,
            caseQty: caseQty,
            baraQty: baraQty
          });
        }
      });
      
      if (orders.length === 0) {
        alert('æ•°é‡ã‚’é¸æŠã—ã¦ãã ã•ã„');
        return;
      }
      
      // å°åˆ·ç”¨ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ä½œæˆ
      const printWindow = window.open('', '_blank');
      
      let html = `
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>ç™ºæ³¨è¡¨ï¼ˆé£Ÿæï¼‰</title>
          <style>
            @page { size: A4; margin: 20mm; }
            body { font-family: "MS Gothic", "Hiragino Kaku Gothic ProN", sans-serif; font-size: 12pt; }
            .header { text-align: center; margin-bottom: 20px; }
            .header h1 { font-size: 18pt; margin: 0 0 10px 0; }
            .info { margin-bottom: 20px; }
            .info div { margin: 5px 0; }
            table { width: 100%; border-collapse: collapse; }
            th, td { border: 1px solid #000; padding: 8px; text-align: left; }
            th { background: #f0f0f0; }
            @media print {
              button { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>ç™ºæ³¨è¡¨ï¼ˆé£Ÿæï¼‰</h1>
          </div>
          <div class="info">
            <div>é¡§å®¢ã‚³ãƒ¼ãƒ‰: ${customerCode}</div>
            <div>åº—èˆ—å: ${storeName}</div>
            <div>ç™ºæ³¨æ—¥: ${orderDate}</div>
          </div>
          <table>
            <thead>
              <tr>
                <th>å•†å“ã‚³ãƒ¼ãƒ‰</th>
                <th>å•†å“å</th>
                <th>ã‚±ãƒ¼ã‚¹æ•°</th>
                <th>ãƒãƒ©æ•°</th>
              </tr>
            </thead>
            <tbody>
      `;
      
      orders.forEach(order => {
        html += `
          <tr>
            <td>${order.code}</td>
            <td>${order.product}</td>
            <td>${order.caseQty || '-'}</td>
            <td>${order.baraQty || '-'}</td>
          </tr>
        `;
      });
      
      html += `
            </tbody>
          </table>
          <script>
            window.onload = function() {
              window.print();
            };
          </script>
        </body>
        </html>
      `;
      
      printWindow.document.write(html);
      printWindow.document.close();
    }
    
    // CSVå‡ºåŠ›ï¼ˆPCAå•†é­‚å•†ç®¡ç”¨ï¼‰
    function downloadCSV() {
      const customerCode = document.getElementById('customerCode').value;
      const orderDate = document.getElementById('orderDate').value;
      
      if (!customerCode) {
        alert('é¡§å®¢ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }
      
      // æ•°é‡ãŒé¸æŠã•ã‚ŒãŸå•†å“ã‚’åé›†
      const orders = [];
      document.querySelectorAll('.order-table tbody tr').forEach(row => {
        const caseSelect = row.querySelector('.qty-case');
        const baraSelect = row.querySelector('.qty-bara');
        const caseQty = parseInt(caseSelect.value) || 0;
        const baraQty = parseInt(baraSelect.value) || 0;
        
        if (caseQty > 0 || baraQty > 0) {
          const code = caseSelect.dataset.code || '';
          
          // å•†å“ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹å ´åˆã®ã¿CSVã«å«ã‚ã‚‹
          if (code) {
            orders.push({
              productCode: code,
              quantity: baraQty,  // ãƒãƒ©æ•°ã¯ã€Œæ•°é‡ã€åˆ—
              boxes: caseQty      // ã‚±ãƒ¼ã‚¹æ•°ã¯ã€Œç®±æ•°ã€åˆ—ï¼ˆåŒºåˆ†ï¼‰
            });
          }
        }
      });
      
      if (orders.length === 0) {
        alert('å•†å“ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹å•†å“ã®æ•°é‡ã‚’é¸æŠã—ã¦ãã ã•ã„');
        return;
      }
      
      // CSVãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆPCAå•†é­‚å•†ç®¡å½¢å¼ï¼‰
      let csv = 'å•†å“ã‚³ãƒ¼ãƒ‰,æ•°é‡,ç®±æ•°\n';
      
      // CSVãƒ‡ãƒ¼ã‚¿
      orders.forEach(order => {
        csv += `${order.productCode},${order.quantity},${order.boxes}\n`;
      });
      
      // BOMä»˜ãã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆExcelã§æ–‡å­—åŒ–ã‘é˜²æ­¢ï¼‰
      const bom = new Uint8Array([0xEF, 0xBB, 0xBF]);
      const blob = new Blob([bom, csv], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = `é£Ÿæç™ºæ³¨_PCA_${orderDate}.csv`;
      link.click();
    }
    
    // ãƒ¡ãƒ¼ãƒ«é€ä¿¡ï¼ˆFirebase Functionsä½¿ç”¨ï¼‰
    async function sendOrder() {
      const customerCode = document.getElementById('customerCode').value;
      const storeName = document.getElementById('storeName').value;
      const orderDate = document.getElementById('orderDate').value;
      
      if (!customerCode) {
        alert('é¡§å®¢ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }
      
      if (!storeName) {
        alert('åº—èˆ—åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }
      
      // æ•°é‡ãŒé¸æŠã•ã‚ŒãŸå•†å“ã‚’åé›†
      const orders = [];
      document.querySelectorAll('.order-table tbody tr').forEach(row => {
        const caseSelect = row.querySelector('.qty-case');
        const baraSelect = row.querySelector('.qty-bara');
        const caseQty = caseSelect.value;
        const baraQty = baraSelect.value;
        
        if (caseQty || baraQty) {
          const code = caseSelect.dataset.code || '';
          const product = caseSelect.dataset.product;
          
          orders.push({
            code: code,
            product: product,
            caseQty: caseQty,
            baraQty: baraQty
          });
        }
      });
      
      if (orders.length === 0) {
        alert('æ•°é‡ã‚’é¸æŠã—ã¦ãã ã•ã„');
        return;
      }
      
      // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
      const sendBtn = document.getElementById('sendBtn');
      const originalText = sendBtn.textContent;
      sendBtn.disabled = true;
      sendBtn.textContent = 'ğŸ“§ é€ä¿¡ä¸­...';
      sendBtn.style.opacity = '0.6';
      
      try {
        // Firebase Functionsã‚’å‘¼ã³å‡ºã—
        const sendOrderFunction = window.httpsCallable(window.firebaseFunctions, 'sendOrder');
        const result = await sendOrderFunction({
          customerCode: customerCode,
          storeName: storeName,
          orderDate: orderDate,
          orders: orders,
          orderType: 'shokuzai'
        });
        
        alert('âœ… ç™ºæ³¨ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸï¼\nPDFã¨CSVã‚’æ·»ä»˜ã—ã¦ gymnastmasaki@yahoo.co.jp ã«é€ä¿¡æ¸ˆã¿ã§ã™ã€‚');
        
        // åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
        document.getElementById('actionButtons').style.display = 'none';
        document.getElementById('switchButtons').style.display = 'flex';
        
      } catch (error) {
        console.error('é€ä¿¡ã‚¨ãƒ©ãƒ¼:', error);
        alert('âŒ é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
        
        // ãƒœã‚¿ãƒ³ã‚’å…ƒã«æˆ»ã™
        sendBtn.disabled = false;
        sendBtn.textContent = originalText;
        sendBtn.style.opacity = '1';
      }
    }
  </script>
</body>
</html>
